#!/bin/bash
# https://ss64.com/bash/test.html

# Операторы проверки файлов
# -d Проверяет, является ли файл каталогом
file_passwd="/etc/passwd"
if [ -d /etc ]; then
    echo "/etc — каталог"
fi
[[ -d "$HOME" ]] && echo "Домашний каталог существует"
#-----------------------------------------------------
# -r Проверяет, доступен ли файл для чтения
if [ -r /etc/passwd ]; then
    echo "Файл можно читать"
fi
[[ -r "$file_passwd" ]] || echo "Нет прав на чтение"
#-----------------------------------------------------
# -w Проверяет, доступен ли файл для записи
if [ -w /tmp ]; then
    echo "Можно писать в /tmp"
fi
[[ -w "$file_passwd" ]] && echo "Файл доступен для записи"
#-----------------------------------------------------
# -x Проверяет, является ли файл исполняемым
if [ -x /bin/ls ]; then
    echo "ls исполняемый"
fi
[[ -x "$script" ]] || echo "Скрипт не исполняемый"
#-----------------------------------------------------
# -f Проверяет, является ли файл обычным файлом
if [ -f /etc/passwd ]; then
    echo "Это обычный файл"
fi
[[ -f "$file" ]] || echo "Не обычный файл (или не существует)"
#-----------------------------------------------------
# -s Проверяет, больше ли размер файла нуля
if [ -s /etc/passwd ]; then
    echo "Файл не пустой"
fi
[[ -s "$logfile" ]] && echo "Лог содержит данные"
#-----------------------------------------------------
# -L Проверяет, на символическую ссылку
# -e Проверяет, на существование цели
[[ -L file && -e file ]] && echo "файл по ссылке существует"
#-----------------------------------------------------
# Мини-шаблон: проверка перед использованием файла
if [[ -f "$file" && -r "$file" ]]; then
    cat "$file"
else
    echo "Файл не существует или недоступен"
fi
#-----------------------------------------------------
# File Age Tests
# если file1 существует и новее чем file2 то true
[[ "${file1}" -nt "${file2}" ]] ; echo "$?"
# если file1 существует и старее чем file2 то true
[[ "${file1}" -ot "${file2}" ]] ; echo "$?"
# если оба файла существуют и ссылаются на один и тот же файл
[[ "${file1}" -ef "${file2}" ]] ; echo "$?"

# ==========================================================

# Операторы сравнения строк
# Оператор    Описание
# =           Проверяет, равна ли одна строка другой строке
# ==          Синоним = при использовании внутри конструкций [[ ]]
# !=          Проверяет, не равна ли одна строка другой строке
# <           Проверяет, предшествует ли одна строка другой строке (в алфавитном порядке)
# >           Проверяет, следует ли одна строка за другой строкой (в алфавитном порядке)
# -z          Проверяет, является ли строка пустой (null)
# -n          Проверяет, не является ли строка пустой (null)


str="one"
user="dm"
# test - вычисляет логическое выражение true/false
test "${str}" == "one"
echo "$?"

[ "${str}" = "one" ]
echo "$?"

[[ ${str} == "one" ]]
echo "$?"

[[ $user == "dm" ]]
[[ $user != "root" ]]
[[ -z $user ]]
[[ -n $user ]]

null=""
[ "${null}" ]       # $? -> 1

[[ $ar = arg* ]] ; echo "$?"

# Операторы сравнения целых чисел
# Оператор       Описание
# -eq            Проверяет, равно ли число другому числу
# -ne            Проверяет, не равно ли число другому числу
# -ge            Проверяет, больше ли число или равно другому числу
# -gt            Проверяет, больше ли число другому числу
# -lt            Проверяет, меньше ли число другому числу
# -le            Проверяет, меньше ли число или равно другому числу

[ 10 -gt 2 ]
(( 10 > 2 ))



exit 0