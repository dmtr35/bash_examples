#!/bin/bash

if [ -d /home ]; then
    echo "/home существует"
fi

# Проверка файлов (File operators)
# Опция	            Значение	                    Пример
# -a FILE	        Файл существует	                [ -a /etc/passwd ]    (устаревшее, лучше -e)
# -e FILE	        Файл существует	                [ -e /tmp/file ]
# -b FILE	        Файл блочное устройство	        [ -b /dev/sda ]
# -c FILE	        Файл символьное устройство	    [ -c /dev/null ]
# -d FILE	        Файл — директория	            [ -d /home ]
# -f FILE	        Файл существует и обычный	    [ -f /etc/passwd ]
# -r FILE	        Файл доступен для чтения	    [ -r file.txt ]
# -w FILE	        Файл доступен для записи	    [ -w file.txt ]
# -x FILE	        Файл исполняемый	            [ -x script.sh ]
# -s FILE	        Файл существует и не пустой	    [ -s log.txt ]
# -L FILE	        Файл — символическая ссылка	    [ -L link ]
# -p FILE	        Файл — named pipe (FIFO)	    [ -p mypipe ]

# Пример:
if [ -d /home ]; then
    echo "/home существует"
fi

# =====================================================================

# сравнение дат файлов:
file1 -nt file2                     # file1 новее file2
file1 -ot file2                     # file1 старее file2
file1 -ef file2                     # file1 и file2 — жесткие ссылки на один файл

# Пример:
if [ file1.txt -nt file2.txt ]; then
    echo "file1 новее file2"
fi
# =====================================================================

# Проверка строк (String operators)
# Опция	                Значение	                    Пример
# -z STRING	            Строка пустая	                [ -z "$var" ]
# -n STRING	            Строка не пустая	            [ -n "$var" ]
# STRING1 = STRING2	    Строки равны	                [ "$a" = "$b" ]
# STRING1 != STRING2	Строки не равны	                [ "$a" != "$b" ]
# STRING1 < STRING2	    Лексикографически меньше	    [ "$a" \< "$b" ]
# STRING1 > STRING2	    Лексикографически больше	    [ "$a" \> "$b" ]

# Пример:
if [ "$name" = "Vadim" ]; then
    echo "Привет, Vadim"
fi

# =====================================================================

# Логические и другие операторы
# Опция	                Значение	                    Пример
# ! EXPR	            НЕ (инверсия)	                [ ! -f file.txt ]
# EXPR1 -a EXPR2	    И (AND)	                        [ -f a -a -f b ]
# EXPR1 -o EXPR2	    ИЛИ (OR)	                    [ -f a -o -f b ]
# arg1 -eq arg2	        Равенство чисел	                [ 3 -eq 3 ]
# arg1 -ne arg2	        Не равно	                    [ 3 -ne 4 ]
# arg1 -lt arg2	        Меньше	                        [ 2 -lt 5 ]
# arg1 -le arg2	        Меньше или равно	            [ 2 -le 2 ]
# arg1 -gt arg2	        Больше	                        [ 5 -gt 2 ]
# arg1 -ge arg2	        Больше или равно	            [ 5 -ge 5 ]

# Пример комбинирования условий:
if [ -f file1.txt -a -r file1.txt ]; then
    echo "Файл существует и его можно читать"
fi

# -a и -o считаются устаревшими и небезопасными
# РЕКОМЕНДУЕТСЯ: использовать && и || вместо -a и -o
if [ -f file1.txt ] && [ -r file1.txt ]; then
    echo "Файл существует и читается"
fi
# Или в современном bash:
if [[ -f file1.txt && -r file1.txt ]]; then
    echo "Файл существует и читается"
fi


# =====================================================================

# Специальные проверки
# -o OPTION     — проверка включённой опции shell
# -v VAR        — проверка, существует ли переменная
# -R VAR        — переменная является ссылкой на имя

# Пример:
set -o noclobber                                # включаем опцию
[ -o noclobber ] && echo "Опция включена"

# =====================================================================


# КОД ВОЗВРАТА:
# test возвращает 0 = true, 1 = false
# if проверяет именно код возврата, а не "true/false"

# Пример:
test -f /etc/passwd
echo $?                     # 0 если файл есть



exit 0